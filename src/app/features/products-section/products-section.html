<section class="products-section section-padding" id="products">
  <div class="container">

    <!-- Section Header -->
    <div class="section-title-wrapper text-center mb-2xl">
      <h2 class="section-title">منتجاتنا المختارة</h2>
      <p class="section-subtitle text-muted mt-sm mx-auto">
        نقدم لكم أفضل أنواع الدواجن الطازجة والمجمدة، مذبوحة يومياً وفقاً لأعلى معايير الجودة والنظافة، لتصلكم من
        المزرعة إلى مائدتكم.
      </p>
    </div>

    <!-- Category Tabs -->
    <div class="category-tabs flex justify-center gap-md mb-2xl">
      @for (category of categories; track category.id) {
      <button class="tab-btn" [class.active]="activeCategory().id === category.id" (click)="selectCategory(category)">

        <span class="tab-icon">
          @if(category.id === 'fresh') {
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2v20"></path>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
          } @else {
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="8" y1="2" x2="8" y2="22"></line>
            <line x1="16" y1="2" x2="16" y2="22"></line>
            <line x1="2" y1="8" x2="22" y2="8"></line>
            <line x1="2" y1="16" x2="22" y2="16"></line>
          </svg>
          }
        </span>
        {{ category.name }}
      </button>
      }
    </div>

    <!-- Products Grid -->
    <div class="products-grid products-spacing">
      @for (product of displayedProducts(); track product.id) {
      <div data-aos="fade-up" [attr.data-aos-delay]="($index % 4) * 100">
        <app-product-card [title]="product.name" [description]="product.description" [id]="product.id"
          [price]="product.price_per_kg.toString()" [imageUrl]="product.photo"
          [badgeText]="activeCategory().id === 'fresh' ? 'طازج' : 'مجمد'"
          [badgeType]="activeCategory().id === 'fresh' ? 'fresh' : 'new'">
        </app-product-card>
      </div>
      }
    </div>

    <!-- View All Action -->
    @if (hasMoreProducts()) {
    <div class="view-all-wrapper text-center mt-2xl" data-aos="fade-up">
      <button class="btn btn-outline" (click)="loadMore()"
        style="border-radius: var(--radius-full); padding: 0.75rem 2rem;">
        عرض المزيد من المنتجات
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </button>
    </div>
    }

  </div>
</section>